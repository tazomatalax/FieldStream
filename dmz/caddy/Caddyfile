{$DOMAIN_NAME} {
    # Automatic HTTPS with Let's Encrypt
    tls {$ADMIN_EMAIL}

    # Reverse proxy WebSocket traffic to the internal service
    reverse_proxy /ws websocket-server:8080

    # Security Headers and Logging
    encode gzip
    log {
        output file /var/log/caddy/access.log
    }

    @adminAPI path /api/*
    reverse_proxy @adminAPI host.docker.internal:3001

    # Simple static admin UI (optional)
    handle_path /admin/* {
        root * /srv/admin
        try_files {path} /admin/index.html
        file_server
    }
}